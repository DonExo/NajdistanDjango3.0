{% extends 'base.html' %}

{% block title %}
    {% include 'includes/title.html' %}
{% endblock %}

{% block content %}

    <h2>Listing details</h2>

    {% if user == object.user %}
        <a href="{% url 'listings:update' object.slug %}">Update</a> |
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="file" name="images" multiple alt="Upload images" required >
            <input type="submit" value="Submit">
        </form>
        <a href="{% url 'listings:delete' object.slug %}" onclick="return confirm('Are you sure you want to delete this listing?')">Delete</a>
    {% endif %}
    <div style="border: 1px solid black; margin: 5px; padding: 5px;">
        <b>Title:</b> {{ object.title }} <br/>
        <b>Description:</b> {{ object.description|truncatewords:10 }} <br/>
        <b>Zip-code:</b> {{ object.zip_code }} <br/>
        <b>Listed by</b> <a href="{% url 'accounts:user_identifier' object.user.identifier %}">{{ object.user }}</a> <br/>
        <b>Visited: </b> {{ object.times_visited }} time{{ object.times_visited|pluralize }}. <br/>
        {% lorem %} <br>
        <img src="{{ object.cover_image.url }}" alt="{{ object.title }}" width="250px"/><br/>
        {% for image in object.get_images %}
            <img src="{{ image.image.url }}" alt="{{ image.title }}" width="250px"/><br/>
        {% endfor %}
    </div>
{% endblock %}